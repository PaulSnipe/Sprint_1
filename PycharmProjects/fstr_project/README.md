# FSTR Pass Submission API

**FSTR Pass Submission API** ‚Äî —ç—Ç–æ REST API –¥–ª—è –ø—Ä–∏—ë–º–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≥–æ—Ä–Ω—ã—Ö –ø–µ—Ä–µ–≤–∞–ª–∞—Ö, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∞–º–∏.  
–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ –±–∞–∑–µ **FastAPI** –∏ **PostgreSQL** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **SQLAlchemy ORM**.  
API –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–Ω–µ—à–Ω–∏–º –º–æ–±–∏–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏–º –¥–∞–Ω–Ω—ã–µ –æ –ø–µ—Ä–µ–≤–∞–ª–∞—Ö.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ü—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö –æ –ø–µ—Ä–µ–≤–∞–ª–∞—Ö —á–µ—Ä–µ–∑ POST-–∑–∞–ø—Ä–æ—Å `/submitData`
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞ –ø–æ ID `/submitData/{id}`
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞, –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å = `new` `/submitData/{id}` (PATCH)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–∞–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email `/submitData/?user__email=<email>`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL

---

##  –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Python 3.10+**
- **FastAPI**
- **SQLAlchemy**
- **PostgreSQL**
- **Pydantic**
- **Uvicorn**

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ 

1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone git@github.com:PaulSnipe/Sprint_1.git
   cd Sprint_1/PycharmProjects/fstr_project
–°–æ–∑–¥–∞–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
pip install -r requirements.txt
–ù–∞—Å—Ç—Ä–æ–π .env —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è PostgreSQL:

FSTR_DB_HOST=localhost
FSTR_DB_PORT=5432
FSTR_DB_LOGIN=postgres
FSTR_DB_PASS=password
FSTR_DB_NAME=fstr_db
–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä:

uvicorn app.main:app --reload
Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
http://127.0.0.1:8000/docs
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

fstr_project/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # ORM-–º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ database.py      # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ crud.py          # –ö–ª–∞—Å—Å/—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ submit.py    # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã POST/GET/PATCH
‚îú‚îÄ‚îÄ venv/                # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ 
‚îú‚îÄ‚îÄ .env                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è 
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ requirements.txt

1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä–µ–≤–∞–ª–∞ (POST /submitData)
–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):

{
  "beauty_title": "–ø–µ—Ä.",
  "title": "–ü—Ö–∏—è",
  "other_titles": "–¢—Ä–∏–µ–≤",
  "connect": "",
  "add_time": "2021-09-22 13:18:13",
  "user": {
    "email": "qwerty@mail.ru",
    "fam": "–ü—É–ø–∫–∏–Ω",
    "name": "–í–∞—Å–∏–ª–∏–π",
    "otc": "–ò–≤–∞–Ω–æ–≤–∏—á",
    "phone": "+7 555 55 55"
  },
  "coords": {
    "latitude": "45.3842",
    "longitude": "7.1525",
    "height": "1200"
  },
  "level": {
    "winter": "",
    "summer": "1–ê",
    "autumn": "1–ê",
    "spring": ""
  },
  "images": [
    {"data":"<–∫–∞—Ä—Ç–∏–Ω–∫–∞1>", "title":"–°–µ–¥–ª–æ–≤–∏–Ω–∞"},
    {"data":"<–∫–∞—Ä—Ç–∏–Ω–∫–∞2>", "title":"–ü–æ–¥—ä—ë–º"}
  ]
}
–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

{
  "status": 200,
  "message": null,
  "id": 42
}
2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞ –ø–æ ID (GET /submitData/{id})
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

GET http://127.0.0.1:8000/submitData/42
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

{
  "id": 42,
  "status": "new",
  "beauty_title": "–ø–µ—Ä.",
  "title": "–ü—Ö–∏—è",
  "other_titles": "–¢—Ä–∏–µ–≤",
  "connect": "",
  "add_time": "2021-09-22 13:18:13",
  "user": {
    "email": "qwerty@mail.ru",
    "fam": "–ü—É–ø–∫–∏–Ω",
    "name": "–í–∞—Å–∏–ª–∏–π",
    "otc": "–ò–≤–∞–Ω–æ–≤–∏—á",
    "phone": "+7 555 55 55"
  },
  "coords": {
    "latitude": "45.3842",
    "longitude": "7.1525",
    "height": "1200"
  },
  "level": {
    "winter": "",
    "summer": "1–ê",
    "autumn": "1–ê",
    "spring": ""
  },
  "images": [
    {"title":"–°–µ–¥–ª–æ–≤–∏–Ω–∞","data":"<–∫–∞—Ä—Ç–∏–Ω–∫–∞1>"},
    {"title":"–ü–æ–¥—ä—ë–º","data":"<–∫–∞—Ä—Ç–∏–Ω–∫–∞2>"}
  ]
}
3. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞ (PATCH /submitData/{id})
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

PATCH http://127.0.0.1:8000/submitData/42
Content-Type: application/json

{
  "beauty_title": "–ø–µ—Ä. –ü—Ö–∏—è",
  "coords": {
    "height": "1250"
  },
  "level": {
    "summer": "1–ë"
  }
}
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

{
  "state": 1,
  "message": "–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞"
}
–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:

{
  "state": 0,
  "message": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ: —Å—Ç–∞—Ç—É—Å –Ω–µ 'new'"
}
4. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–∞–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email (GET /submitData/?user__email=<email>)
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
GET http://127.0.0.1:8000/submitData/?user__email=qwerty@mail.ru
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
[
  {"id": 42, "title": "–ü—Ö–∏—è", "status": "new", "add_time": "2021-09-22 13:18:13"},
  {"id": 43, "title": "–ê–ª—å–ø–∏–π—Å–∫–∏–π –ø–µ—Ä–µ–≤–∞–ª", "status": "accepted", "add_time": "2021-10-01 09:45:00"}
]
–ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
–ü–∞–≤–µ–ª –ë–µ–∫–∞—Å–æ–≤
–ú–æ—Å–∫–≤–∞, 2025
üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã: pbekasov@mail.ru